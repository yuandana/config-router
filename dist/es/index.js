import r,{createRef as t,useCallback as e}from"react";import{useLocation as n,useParams as o,Redirect as c,BrowserRouter as a,Route as u,Switch as i,NavLink as f,Link as l}from"react-router-dom";export{useHistory,useLocation,useParams,useRouteMatch}from"react-router-dom";import{isObject as p,omit as s,isString as y,isFunction as b}from"lodash-es";function O(r){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function m(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function v(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=r&&("undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"]);if(null!=e){var n,o,c=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(c.push(n.value),!t||c.length!==t);a=!0);}catch(r){u=!0,o=r}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return c}}(r,t)||function(r,t){if(r){if("string"==typeof r)return m(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(r,t):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(r){if(!r)return"";if(!p(r))return"";var t=Object.entries(r).map((function(r){var t=v(r,2),e=t[0],n=t[1];return"".concat(e,"=").concat(n)}));return t.length>0?"?".concat(t.join("&")):""},h=function(r,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r)return"";if(!t||!p(t))return r;var n=r,o=[];if(Object.entries(t).forEach((function(r){var t=v(r,2),e=t[0],c=t[1],a=":".concat(e);-1!==n.indexOf(a)&&(n=n.replace(":".concat(e),c),o.push(e))})),!0===e){var c=s(t,o),a=j(c);n="".concat(n).concat(a)}return n};function g(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function P(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function d(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?P(Object(e),!0).forEach((function(t){g(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var w=new Map,E=function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Array.isArray(t)&&t.map((function(t){var n=t.routes,o=t.path,c=t.name,a="".concat(e).concat(o).replace(/\/\/*/g,"/"),u=r(n,a).routes,i=d(d({},t),{},{fullPath:a,routes:u});return c&&w.set(c,s(i,["component","routes"])),i}));return{routes:n,nameMapper:w}};function S(r,t){if(null==r)return{};var e,n,o=function(r,t){if(null==r)return{};var e,n,o={},c=Object.keys(r);for(n=0;n<c.length;n++)e=c[n],t.indexOf(e)>=0||(o[e]=r[e]);return o}(r,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(n=0;n<c.length;n++)e=c[n],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(o[e]=r[e])}return o}var D=t(),k=t();function A(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function x(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?A(Object(e),!0).forEach((function(t){g(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):A(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var M=function(r){var t=r.name,e=r.to,n=r.params,o=S(r,["name","to","params"]),c=k.current;if(!t||!c)return x(x({},o),{},{to:e});var a=e,u=(c.get(t)||{}).fullPath,i=h(u,n,!0);return e&&!y(e)||(a=i),p(e)&&(a=x(x({},e),{},{pathname:i})),b(e)&&(a=function(r){var t=x(x({},r),{},{pathname:i});return e(t)}),!a&&t&&(a="".concat(t)),x(x({},o),{},{to:a})},T=function(t){var e=t.route,a=void 0===e?{}:e,u=t.children,i=a.redirect,f=a.component,l=a.fullPath,p=n().pathname,s=o(),y=h(l,s),b=i,m=k.current.get(i);return m&&(b=m.fullPath),(b=h(b,s))&&p===y&&p!==b?r.createElement(c,{from:l,to:b}):function(r){return!!(r&&(r.prototype&&r.prototype.isReactComponent||"object"===O(r)&&r.$$typeof||"function"==typeof r))}(f)?r.createElement(a.component,null,u):u},I=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e))return null;if(0===e.length)return null;var n=e.map((function(e,n){var o=e.routes,c=void 0===o?[]:o,a=e.fullPath,i=t(c),f=0===c.length;return r.createElement(u,{key:a||n,path:a,exact:f,strict:!0},r.createElement(T,{route:e},i))}));return r.createElement(i,null,n)},L=function(t){var e=t.routes,n=E(void 0===e?[]:e),o=n.routes,c=n.nameMapper;k&&(k.current=c);var u=I(o);return r.createElement(a,{ref:D},u)};function $(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function B(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?$(Object(e),!0).forEach((function(t){g(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):$(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var C=function(t){var e=o(),n=t.params,c=B(B({},S(t,["params"])),{},{params:B(B({},e),n)});return c=M(c),r.createElement(f,c)};function F(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function R(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?F(Object(e),!0).forEach((function(t){g(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):F(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Y=function(t){var e=o(),n=t.params,c=R(R({},S(t,["params"])),{},{params:R(R({},e),n)});return c=M(c),r.createElement(l,c)};function H(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function N(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?H(Object(e),!0).forEach((function(t){g(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):H(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var U=function(){var r=o();return{navigateBack:e((function(){var r,t;null==D||null===(r=D.current)||void 0===r||null===(t=r.history)||void 0===t||t.goBack()}),[]),navigateTo:e((function(t,e){var n,o,c=(k.current.get(t)||{}).fullPath,a=h(c||t,N(N({},r),e),!0);if(!t)throw new Error("You must specify a path to navigateTo function");a&&(null==D||null===(n=D.current)||void 0===n||null===(o=n.history)||void 0===o||o.push(a))}),[r]),redirectTo:e((function(t,e){var n,o,c=(k.current.get(t)||{}).fullPath,a=h(c||t,N(N({},r),e),!0);if(!t)throw new Error("You must specify a path to navigateTo function");a&&(null==D||null===(n=D.current)||void 0===n||null===(o=n.history)||void 0===o||o.replace(a))}),[r])}},q=function(){var r=n().search.replace("?","").split("&").map((function(r){var t=v(r.split("="),2),e=t[0],n=t[1];return n==="".concat(parseFloat(n))?[e,parseFloat(n)]:[e,n]}));return Object.fromEntries(r)};export{L as ConfigRouter,Y as Link,C as NavLink,k as nameMapperRef,D as navigationRef,U as useNavigate,q as useSearch};
